<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>CMBLensing.jl · CMBLensing.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/cmblensing.css" rel="stylesheet" type="text/css"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">CMBLensing.jl</span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>CMBLensing.jl</a><ul class="internal"><li><a class="tocitem" href="#Documentation-1"><span>Documentation</span></a></li><li><a class="tocitem" href="#Installation-1"><span>Installation</span></a></li></ul></li><li><a class="tocitem" href="01_lense_a_map/">Lensing a flat-sky map</a></li><li><a class="tocitem" href="02_posterior/">The Lensing Posterior</a></li><li><a class="tocitem" href="03_joint_MAP_example/">MAP estimation</a></li><li><a class="tocitem" href="04_from_python/">Calling from Python</a></li><li><a class="tocitem" href="05_field_basics/">Field Basics</a></li><li><a class="tocitem" href="06_gpu/">GPU</a></li><li><a class="tocitem" href="api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"></nav><div class="docs-right"><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="CMBLensing.jl-1"><a class="docs-heading-anchor" href="#CMBLensing.jl-1">CMBLensing.jl</a><a class="docs-heading-anchor-permalink" href="#CMBLensing.jl-1" title="Permalink"></a></h1><p><a href="https://cosmicmar.com/CMBLensing.jl/stable"><img src="https://img.shields.io/badge/docs-stable-blue.svg" alt/></a> <a href="https://gitter.im/CMBLensing-jl/community?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge"><img src="https://badges.gitter.im/CMBLensing-jl/community.svg" alt="Gitter"/></a></p><p><a href="https://github.com/marius311/CMBLensing.jl"><img src="https://img.shields.io/badge/source-github-blue" alt/></a>  <a href="https://mybinder.org/v2/gh/marius311/CMBLensing.jl/gh-pages?urlpath=lab"><img src="https://mybinder.org/badge_logo.svg" alt="Binder"/></a>  <a href="https://github.com/marius311/CMBLensing.jl/actions?query=workflow%3Aruntests+branch%3Amaster"><img src="https://github.com/marius311/CMBLensing.jl/workflows/runtests/badge.svg" alt/></a> <a href="https://github.com/marius311/CMBLensing.jl/actions?query=workflow%3Adocbuild+branch%3Amaster"><img src="https://github.com/marius311/CMBLensing.jl/workflows/docbuild/badge.svg" alt/></a> </p><p>CMBLensing.jl is a next-generation tool for analysis of the lensed Cosmic Microwave Background. It is written in <a href="https://julialang.org/">Julia</a> and transparently callable from Python.</p><p>At its heart, CMBLensing.jl maximizes or samples the Bayesian posterior for the CMB lensing problem. It also contains tools to quickly manipulate and process CMB maps, set up modified posteriors, and take gradients using automatic differentiation.</p><h3 id="Highlights-1"><a class="docs-heading-anchor" href="#Highlights-1">Highlights</a><a class="docs-heading-anchor-permalink" href="#Highlights-1" title="Permalink"></a></h3><ul><li>Fully Nvidia GPU compatible (1-2 order of magnitude speedups over CPU, depending on the problem size and hardware).</li><li>Automatic differentiation (via <a href="https://fluxml.ai/Zygote.jl/">Zygote.jl</a>) provides for-free gradients of your custom posteriors.</li><li>Includes the following algorithms to lense a map:<ul><li><code>LenseFlow</code> (<a href="https://arxiv.org/abs/1708.06753">Millea, Anderes, &amp; Wandelt 2017</a>)</li><li><code>Taylens</code> (<a href="https://arxiv.org/abs/1307.0719">Næss &amp; Louis 2013</a>)</li><li>Taylor series expansion to any order</li><li>Bilinear interpolation</li></ul></li><li>Maximize and sample <span>$\mathcal{P}(f,\phi,\theta\,|\,d)$</span>, the joint maximum a posteriori estimate of the lensing potential, <span>$\phi$</span>, the  temperature and/or polarization fields, <span>$f$</span>, and cosmological parameters, <span>$\theta$</span> (<a href="https://arxiv.org/abs/1708.06753">Millea, Anderes, &amp; Wandelt 2017</a>, <a href="https://arxiv.org/abs/2002.00965">Millea, Anderes, &amp; Wandelt 2020</a>)</li><li>Maximize <span>$\mathcal{P}(\phi\,|\,d,\theta)$</span>, i.e. the marginal maximum a posteriori estimate of the lensing potential, <span>$\phi$</span>, at fixed cosmological parameters, <span>$\theta$</span> (<a href="https://arxiv.org/abs/1704.08230">Carron &amp; Lewis 2017</a>)</li><li>Do basic quadratic estimation of <span>$\phi$</span> (<a href="https://arxiv.org/abs/astro-ph/0111606">Hu &amp; Okamoto 2003</a>)</li></ul><h2 id="Documentation-1"><a class="docs-heading-anchor" href="#Documentation-1">Documentation</a><a class="docs-heading-anchor-permalink" href="#Documentation-1" title="Permalink"></a></h2><p>The best place to get started is to read the <a href="https://cosmicmar.com/CMBLensing.jl/">documentation</a> (which is a work-in-progress, but contains many useful examples). </p><p>Most of the pages in the documentation are Jupyter notebooks, and you can click the &quot;launch binder&quot; link at the top of each page to launch a Jupyterlab server running the notebook in your browser (courtesy of <a href="https://mybinder.org/">binder</a>). </p><p>You can also clone the repostiory and open the notebooks in <a href="https://github.com/marius311/CMBLensing.jl/tree/master/docs/src">docs/src</a> if you want to run them locally (which will usually lead to higher performance). The notebooks are stored as <code>.md</code> files rather than <code>.ipynb</code> format. Its recommended to install <a href="jupytext">Jupytext</a> (<code>pip install jupytext</code>) and then you can run these <code>.md</code> directly from Jupyterlab by right-clicking on them and selecting <code>Open With -&gt; Notebook</code>. Otherwise, run the script <code>docs/make_notebooks.sh</code> to convert the <code>.md</code> files to <code>.ipynb</code> which you can then open as desired. </p><h2 id="Installation-1"><a class="docs-heading-anchor" href="#Installation-1">Installation</a><a class="docs-heading-anchor-permalink" href="#Installation-1" title="Permalink"></a></h2><h3 id="Requirements-1"><a class="docs-heading-anchor" href="#Requirements-1">Requirements</a><a class="docs-heading-anchor-permalink" href="#Requirements-1" title="Permalink"></a></h3><ul><li>Julia 1.6</li><li><em>(recommended)</em> An Nvidia GPU and <a href="https://github.com/JuliaGPU/CUDA.jl">CUDA.jl</a> for GPU support</li><li><em>(recommended)</em> FFTW.jl built with <a href="https://juliamath.github.io/FFTW.jl/stable/#Installation-1"><code>JULIA_FFTW_PROVIDER=MKL</code></a> for faster CPU FFTs </li><li><em>(recommended)</em> Python 3 + matplotlib (used for plotting)</li><li><em>(recommended)</em> <a href="https://github.com/cmbant/CAMB">pycamb</a> to generate <span>$C_\ell$</span>&#39;s</li><li><em>(recommended)</em> <a href="https://github.com/cormullion/juliamono/releases">JuliaMono</a> font to ensure characters like <code>f̃, ϕ, ∇, ℓ</code>, etc... are rendered correctly</li><li><em>(optional)</em> <a href="https://github.com/healpy/healpy">healpy</a> for experimental curved sky support</li></ul><h3 id="Native-installation-1"><a class="docs-heading-anchor" href="#Native-installation-1">Native installation</a><a class="docs-heading-anchor-permalink" href="#Native-installation-1" title="Permalink"></a></h3><p>To install the Julia package locally, run:</p><pre class="language-juliapkg"><code class="language-juliapkg">pkg&gt; add CMBLensing</code></pre><p>(type <code>]</code> at the Julia REPL to reach the <code>pkg&gt;</code> prompt)</p><p>It&#39;s recommended to link Julia to Intel MKL FFT libraries, which provide significantly faster FFTs when running on CPU. This can be done easily by running <code>ENV[&quot;JULIA_FFTW_PROVIDER&quot;]=&quot;MKL&quot;; using Pkg; Pkg.build(&quot;FFTW&quot;)</code> from Julia and restarting the session (see also <a href="https://github.com/JuliaMath/FFTW.jl#mkl">here</a>).</p><h3 id="Docker-installation-1"><a class="docs-heading-anchor" href="#Docker-installation-1">Docker installation</a><a class="docs-heading-anchor-permalink" href="#Docker-installation-1" title="Permalink"></a></h3><p>Also provided is a Docker container which includes a Jupyterlab server and all the recommended and optional dependencies to run and use <code>CMBLensing.jl</code>. Launch this container with:</p><pre class="language-sh"><code class="language-sh">git clone https://github.com/marius311/CMBLensing.jl.git
cd CMBLensing.jl
docker-compose pull
docker-compose up</code></pre><p>The first time you run this, it will automatically download the (~1Gb) container from the Docker hub. The command will prompt you with the URL which you should open in a browser to access the notebook.</p><p>To run the notebook on a different port than the default <code>8888</code>, do <code>PORT=1234 docker-compose up</code> where <code>1234</code> is whatever port number you want.</p><p>You can also build the container locally by replacing <code>docker-compose pull</code> with <code>docker-compose build</code> above.</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="01_lense_a_map/">Lensing a flat-sky map »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 28 April 2021 19:12">Wednesday 28 April 2021</span>. Using Julia version 1.6.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
